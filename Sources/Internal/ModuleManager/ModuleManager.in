#include "ModuleManager/ModuleManager.h"
#include "ModuleManager/IModule.h"

@IMODULE_INCLUDES@

namespace DAVA
{

@IMODULE_INIT_POINTERS@
@IMODULE_GET_MODULE_CODE@
    ModuleManager::ModuleManager()
    {
        pointersToModules = new PointersToModules;

@IMODULE_INIT_CODE@
        for (const auto& module : listModules)
        {
            module->PostInit();
        }
    }

    ModuleManager::~ModuleManager()
    {
        delete pointersToModules;
        pointersToModules = nullptr;

        for (const auto& module : listModules)
        {
            module->Shutdown();
            delete module;
        }
        listModules.clear();
    }    
}